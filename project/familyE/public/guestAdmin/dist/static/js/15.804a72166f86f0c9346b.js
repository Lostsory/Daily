webpackJsonp([15],{l5Fo:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("1onU"),o=l("gyMJ"),i=l("0xDb"),r={components:{pagination:a.a},data:function(){return{tableData:[],tableLoading:!0,listQuery:{pageNum:1,pageSize:20},total:0,index:0,drinkDialog:{title:"",type:"",show:!1},cityForm:{},cityRules:{cityName:[{required:!0,message:"此项为必填项",trigger:"blur"}],responsibleName:[{required:!0,message:"此项为必填项",trigger:"blur"}],responsiblePhone:[{required:!0,message:"此项为必填项",trigger:"blur"}],code:[{required:!0,message:"此项为必填项",trigger:"blur"}]}}},filters:{format:function(e){var t=new Date(e);function l(e){return e<10?"0"+e:e}return t.getFullYear()+"-"+l(t.getMonth()+1)+"-"+l(t.getDate())+" "+l(t.getHours())+":"+l(t.getMinutes())+":"+l(t.getSeconds())}},computed:{num:function(e){var t=this.listQuery;return(t.pageNum-1)*t.pageSize+1}},methods:{getData:function(){var e=this;Object(o.c)(this.listQuery).then(function(t){console.log(t),e.tableLoading=!1,e.tableData=t.data.data,e.total=parseInt(t.data.total)})},handleUpdate:function(e){this.$refs.cityForm&&this.$refs.cityForm.resetFields(),this.drinkDialog={type:"UPDATE",show:!0,title:"修改"}},handleDelete:function(e){var t=this;Object(i.a)(this,function(){Object(o.b)({code:e.code}).then(function(){t.getData()})})},handleAdd:function(){this.drinkDialog={type:"ADD",show:!0,title:"新增"},this.$refs.cityForm&&this.$refs.cityForm.resetFields()},save:function(){var e=this;"ADD"===this.drinkDialog.type&&this.$refs.cityForm.validate(function(t){t&&Object(o.a)(e.cityForm).then(function(t){e.getData(),e.drinkDialog.show=!1})})}},created:function(){this.getData()}},n={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("div",{staticClass:"filter-container"},[l("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-edit"},on:{click:e.handleAdd}},[e._v("添加")])],1),e._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{size:"medium",data:e.tableData,border:"",stripe:!0}},[l("el-table-column",{attrs:{align:"center",type:"index",index:e.num,label:"序号",width:"60"}}),e._v(" "),l("el-table-column",{attrs:{prop:"cityName",align:"center",label:"城市名称"}}),e._v(" "),l("el-table-column",{attrs:{prop:"code",align:"center","show-overflow-tooltip":"",label:"城市编号"}}),e._v(" "),l("el-table-column",{attrs:{prop:"responsibleName",align:"center","show-overflow-tooltip":"",label:"负责人"}}),e._v(" "),l("el-table-column",{attrs:{prop:"responsiblePhone","show-overflow-tooltip":"",align:"center",label:"联系方式"}}),e._v(" "),l("el-table-column",{attrs:{prop:"createTime","show-overflow-tooltip":"",align:"center",label:"开通时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("format")(t.row.createTime))+"\n      ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":"",align:"center",label:"备注"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"操作",width:"80","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(l){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),l("el-dialog",{attrs:{title:e.drinkDialog.title,visible:e.drinkDialog.show,width:"500px"},on:{"update:visible":function(t){e.$set(e.drinkDialog,"show",t)}}},[l("el-form",{ref:"cityForm",attrs:{size:"medium",rules:e.cityRules,model:e.cityForm,"label-position":"left","label-width":"100px"}},[l("el-row",[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"城市名称：",prop:"cityName"}},[l("el-input",{attrs:{placeholder:"请输入城市名称"},model:{value:e.cityForm.cityName,callback:function(t){e.$set(e.cityForm,"cityName",t)},expression:"cityForm.cityName"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"城市编号：",prop:"code"}},[l("el-input",{attrs:{placeholder:"请输入城市编号"},model:{value:e.cityForm.code,callback:function(t){e.$set(e.cityForm,"code",t)},expression:"cityForm.code"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"负责人：",prop:"responsibleName"}},[l("el-input",{attrs:{placeholder:"请输入负责人姓名"},model:{value:e.cityForm.responsibleName,callback:function(t){e.$set(e.cityForm,"responsibleName",t)},expression:"cityForm.responsibleName"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"联系方式：",prop:"responsiblePhone"}},[l("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:e.cityForm.responsiblePhone,callback:function(t){e.$set(e.cityForm,"responsiblePhone",t)},expression:"cityForm.responsiblePhone"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"备注："}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入"},model:{value:e.cityForm.remark,callback:function(t){e.$set(e.cityForm,"remark",t)},expression:"cityForm.remark"}})],1)],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.drinkDialog.show=!1}}},[e._v("取消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确认开通")])],1)],1),e._v(" "),l("pagination",{attrs:{total:e.total,listQuery:e.listQuery},on:{getTableData:e.getData}})],1)},staticRenderFns:[]},s=l("vSla")(r,n,!1,null,null,null);t.default=s.exports}});