webpackJsonp([10],{AvyF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("IHPB"),r=n.n(a),i=n("gyMJ"),c={data:function(){return{treeData:[]}},methods:{addGrade:function(){var t=this;this.$prompt("请输入年级名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;Object(i.e)({gradeName:n}).then(function(e){t.getGrade()})})},append:function(t){var e=this;console.log(t),this.$prompt("请输入科目名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(n){var a=n.value;Object(i.y)({subjectName:a,gradeId:t._id}).then(function(t){e.getGrade()})})},remove:function(t,e){var n=this;1===t.level?Object(i.f)({id:e._id}).then(function(t){n.getGrade()}):Object(i.z)({id:e._id}).then(function(t){n.getGrade()})},getGrade:function(){var t=this;Object(i.g)().then(function(e){var n=[];n=e.data.data.map(function(t){return t.label=t.gradeName,t}),Object(i.A)().then(function(e){var a=e.data.data.map(function(t){return t.label=t.subjectName,t});n=[].concat(r()(n),r()(a)),t.treeData=t.transterTree(n),console.log(t.treeData)})})},transterTree:function(t){var e={};t.forEach(function(t){e[t._id]=t});var n=[];return t.forEach(function(t,a){var r=e[t.gradeId];r?(r.children||(r.children=[])).push(t):n.push(t)}),n}},created:function(){this.getGrade()}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"subject"}},[n("div",{staticClass:"btn"},[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.addGrade}},[t._v("添加年级")])],1),t._v(" "),n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:0===t.treeData.length,expression:"treeData.length===0"}],attrs:{data:t.treeData,"node-key":"_id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,r=e.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[t._v(t._s(a.label))]),t._v(" "),1==a.level?n("span",[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.append(r)}}},[t._v("\n          增加科目\n        ")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.remove(a,r)}}},[t._v("\n          删除年级\n        ")])],1):n("span",[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.remove(a,r)}}},[t._v("\n          删除科目\n        ")])],1)])}}])})],1)},staticRenderFns:[]};var d=n("vSla")(c,o,!1,function(t){n("vSlj")},"data-v-01e369dd",null);e.default=d.exports},kzPi:function(t,e,n){(t.exports=n("UTlt")(!1)).push([t.i,"\n#subject[data-v-01e369dd]{\r\n  padding-left: 32px\n}\n#subject .btn[data-v-01e369dd]{\r\n  padding: 12px\n}\r\n",""])},vSlj:function(t,e,n){var a=n("kzPi");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("8bSs")("beee5924",a,!0)}});