webpackJsonp([9],{ufIM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("1onU"),r=a("gyMJ"),o=a("0xDb"),n={components:{pagination:l.a},data:function(){return{tableData:[],tableLoading:!0,listQuery:{pageNum:1,pageSize:20},total:0,index:0,drinkDialog:{title:"",type:"",show:!1},studentForm:{},gradeData:[],studentRules:{studentName:[{required:!0,message:"此项为必填项",trigger:"blur"}],phone:[{required:!0,message:"此项为必填项",trigger:"blur"}],typeId:[{required:!0,message:"此项为必填项",trigger:"blur"}]}}},filters:{format:function(t){var e=new Date(t);function a(t){return t<10?"0"+t:t}return e.getFullYear()+"-"+a(e.getMonth()+1)+"-"+a(e.getDate())+" "+a(e.getHours())+":"+a(e.getMinutes())+":"+a(e.getSeconds())}},computed:{num:function(t){var e=this.listQuery;return(e.pageNum-1)*e.pageSize+1}},methods:{getGrade:function(){var t=this;Object(r.f)().then(function(e){t.gradeData=e.data.data,console.log(t.gradeData)})},getData:function(){var t=this;Object(r.l)(this.listQuery).then(function(e){t.tableLoading=!1,t.tableData=e.data.data,t.total=parseInt(e.data.total)})},handleUpdate:function(t){this.$refs.studentForm&&this.$refs.studentForm.resetFields(),this.drinkDialog={type:"UPDATE",show:!0,title:"修改"}},handleDelete:function(t){var e=this;Object(o.a)(this,function(){Object(r.k)({id:t._id}).then(function(){e.getData()})})},handleAdd:function(){this.drinkDialog={type:"ADD",show:!0,title:"新增"},this.$refs.studentForm&&this.$refs.studentForm.resetFields()},save:function(){var t=this;"ADD"===this.drinkDialog.type&&this.$refs.studentForm.validate(function(e){e&&Object(r.j)(t.studentForm).then(function(e){t.getData(),t.drinkDialog.show=!1})})}},created:function(){this.getData(),this.getGrade()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-edit"},on:{click:t.handleAdd}},[t._v("添加")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{size:"medium",data:t.tableData,border:"",stripe:!0}},[a("el-table-column",{attrs:{align:"center",type:"index",index:t.num,label:"序号",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"studentName",align:"center",label:"家长姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",align:"center","show-overflow-tooltip":"",label:"手机号码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gradeName",align:"center",label:"子女年级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"school","show-overflow-tooltip":"",align:"center",label:"所在学校"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime","show-overflow-tooltip":"",align:"center",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n        "+t._s(t._f("format")(e.row.createTime))+"\r\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":"",align:"center",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"80","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.drinkDialog.title,visible:t.drinkDialog.show,width:"500px"},on:{"update:visible":function(e){t.$set(t.drinkDialog,"show",e)}}},[a("el-form",{ref:"studentForm",attrs:{rules:t.studentRules,model:t.studentForm,"label-position":"left","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"家长姓名：",prop:"studentName"}},[a("el-input",{attrs:{placeholder:"请输入教员姓名"},model:{value:t.studentForm.studentName,callback:function(e){t.$set(t.studentForm,"studentName",e)},expression:"studentForm.studentName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"手机号码：",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.studentForm.phone,callback:function(e){t.$set(t.studentForm,"phone",e)},expression:"studentForm.phone"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"所在学校：",prop:"school"}},[a("el-input",{attrs:{placeholder:"请输入所在学校"},model:{value:t.studentForm.school,callback:function(e){t.$set(t.studentForm,"school",e)},expression:"studentForm.school"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"子女年级：",prop:"gradeId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.studentForm.gradeId,callback:function(e){t.$set(t.studentForm,"gradeId",e)},expression:"studentForm.gradeId"}},t._l(t.gradeData,function(t){return a("el-option",{key:t._id,attrs:{label:t.gradeName,value:t._id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"详细地址：",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:t.studentForm.address,callback:function(e){t.$set(t.studentForm,"address",e)},expression:"studentForm.address"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[a("el-radio-group",{model:{value:t.studentForm.sex,callback:function(e){t.$set(t.studentForm,"sex",e)},expression:"studentForm.sex"}},[a("el-radio",{attrs:{label:0}},[t._v("未知")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("女")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入"},model:{value:t.studentForm.remark,callback:function(e){t.$set(t.studentForm,"remark",e)},expression:"studentForm.remark"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.drinkDialog.show=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确认")])],1)],1),t._v(" "),a("pagination",{attrs:{total:t.total,listQuery:t.listQuery},on:{getTableData:t.getData}})],1)},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports}});