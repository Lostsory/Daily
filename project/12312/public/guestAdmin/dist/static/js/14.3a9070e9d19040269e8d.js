webpackJsonp([14],{a8HW:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("4YfN"),l=o.n(r),n=o("1onU"),s=o("gyMJ"),a=o("0xDb"),i={components:{pagination:n.a},data:function(){return{tableData:[],tableLoading:!0,listQuery:{pageNum:1,pageSize:20},total:0,index:0,drinkDialog:{title:"",type:"",show:!1},responsiblePersonForm:{},responsiblePersonRules:{cityCode:[{required:!0,message:"此项为必填项",trigger:"blur"}],responsibleName:[{required:!0,message:"此项为必填项",trigger:"blur"}],responsiblePhone:[{required:!0,message:"此项为必填项",trigger:"blur"}]},cityData:[],identityData:[{label:"超级管理员",id:"1"},{label:"普通管理员",id:"2"}]}},filters:{format:function(e){var t=new Date(e);function o(e){return e<10?"0"+e:e}return t.getFullYear()+"-"+o(t.getMonth()+1)+"-"+o(t.getDate())+" "+o(t.getHours())+":"+o(t.getMinutes())+":"+o(t.getSeconds())}},computed:{num:function(e){var t=this.listQuery;return(t.pageNum-1)*t.pageSize+1}},methods:{getData:function(){var e=this;Object(s.s)(l()({},this.listQuery,{identity:"0"})).then(function(t){console.log(t),e.tableLoading=!1,e.tableData=t.data.data,e.total=parseInt(t.data.total)})},getCity:function(){var e=this;Object(s.c)().then(function(t){e.cityData=t.data.data})},handleUpdate:function(e){this.$refs.responsiblePersonForm&&this.$refs.responsiblePersonForm.resetFields(),this.drinkDialog={type:"UPDATE",show:!0,title:"修改"}},handleDelete:function(e){var t=this;Object(a.a)(this,function(){Object(s.r)({id:e._id}).then(function(){t.getData()})})},handleAdd:function(){this.drinkDialog={type:"ADD",show:!0,title:"新增"},this.$refs.responsiblePersonForm&&this.$refs.responsiblePersonForm.resetFields()},save:function(){var e=this;"ADD"===this.drinkDialog.type&&this.$refs.responsiblePersonForm.validate(function(t){t&&Object(s.q)(e.responsiblePersonForm).then(function(t){e.getData(),e.drinkDialog.show=!1})})}},created:function(){this.getData(),this.getCity()}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"filter-container"},[o("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-edit"},on:{click:e.handleAdd}},[e._v("添加")])],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{size:"medium",data:e.tableData,border:"",stripe:!0}},[o("el-table-column",{attrs:{align:"center",type:"index",index:e.num,label:"序号",width:"60"}}),e._v(" "),o("el-table-column",{attrs:{prop:"responsibleName",align:"center",label:"负责人"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"responsiblePhone",align:"center",label:"联系方式"}}),e._v(" "),o("el-table-column",{attrs:{prop:"cityName","show-overflow-tooltip":"",align:"center",label:"所在城市"}}),e._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"identity",align:"center",label:"身份类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.identity?o("el-tag",{attrs:{type:"warning"}},[e._v("平台超级管理员")]):1==t.row.identity?o("el-tag",{attrs:{type:"danger"}},[e._v("超级管理员")]):o("el-tag",[e._v("普通管理员")])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"createTime","show-overflow-tooltip":"",align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(e._f("format")(t.row.createTime))+"\r\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":"",align:"center",label:"备注"}}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"80","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:e.drinkDialog.title,visible:e.drinkDialog.show,width:"500px"},on:{"update:visible":function(t){e.$set(e.drinkDialog,"show",t)}}},[o("el-form",{ref:"responsiblePersonForm",attrs:{size:"medium",rules:e.responsiblePersonRules,model:e.responsiblePersonForm,"label-position":"left","label-width":"100px"}},[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"城市列表：",prop:"cityCode"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.responsiblePersonForm.cityCode,callback:function(t){e.$set(e.responsiblePersonForm,"cityCode",t)},expression:"responsiblePersonForm.cityCode"}},e._l(e.cityData,function(e){return o("el-option",{key:e._id,attrs:{label:e.cityName,value:e.code}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"负责人：",prop:"responsibleName"}},[o("el-input",{attrs:{placeholder:"请输入负责人姓名"},model:{value:e.responsiblePersonForm.responsibleName,callback:function(t){e.$set(e.responsiblePersonForm,"responsibleName",t)},expression:"responsiblePersonForm.responsibleName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"手机号码：",prop:"responsiblePhone"}},[o("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.responsiblePersonForm.responsiblePhone,callback:function(t){e.$set(e.responsiblePersonForm,"responsiblePhone",t)},expression:"responsiblePersonForm.responsiblePhone"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"备注："}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入"},model:{value:e.responsiblePersonForm.remark,callback:function(t){e.$set(e.responsiblePersonForm,"remark",t)},expression:"responsiblePersonForm.remark"}})],1)],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.drinkDialog.show=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确认")])],1)],1),e._v(" "),o("pagination",{attrs:{total:e.total,listQuery:e.listQuery},on:{getTableData:e.getData}})],1)},staticRenderFns:[]},p=o("vSla")(i,c,!1,null,null,null);t.default=p.exports}});